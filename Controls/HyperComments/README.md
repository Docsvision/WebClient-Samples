# HyperComments

Этот каталог содержит пример реализации элемента управления "HyperComments".

## Настройка среды

**Перечень необходимых инструментов:** 
* [Visual Studio 2017/2019](https://www.visualstudio.com)
* [NodeJS v14.17.0+](https://nodejs.org/en/)

## Сборка и установка

1. Открыть /Samples.sln
2. Собрать проект Controls > HyperComments > HyperCommentsDesignerExtension
2. Открыть консоль в папке Controls > HyperComments > ExchangeRatesWebExtension и выполнить команду `npm install` и `npm run build:prod`
4. Скопировать каталог SamplesOutput\Plugins\HyperCommentsDesignerExtension в каталог "Путь к установленному Web-клиент\Plugins"
5. Скопировать каталог SamplesOutput\Site\Content\Modules\HyperCommentsWebExtension в каталог "Путь к установленному Web-клиент\Site\Content\Modules"
6. Перезапустить IIS

## Регистрация виджета HyperComments
1. Перейти на сайт https://www.hypercomments.com
2. Нажать на кнопку "Войти"
3. Авторизоваться под аккаунтом Google
4. Выбрать лицензию и следовать инструкциям
5. Нажать на кнопку "Установить"
6. Ввести адрес сайта (Допустимо имя сайта в локальной сети)
7. Выбрать тип виджета - HTML Custom code
8. Нажать "Далее"
9. Нажать "Готово"
10. Перейти на страницу "Виджет - Общее"
11. Под заголовком указан идентификатор виджета ID: ######, его следует запомнить, он потребуется далее
12. Установить галку напротив настройки "Get-параметры
Учитывать GET параметры и генерировать новый виджет комментирования для отдельной страницы."
13. Нажать на кнопку "Сохранить"


## Проверка примера

1. Запустить конструктор разметок
2. Скопировать любую разметку для карточки вида "Служебная записка"
3. Выбрать условия использования этой разметки
4. Открыть разметку и добавить в нее новый элемент управления "Hyper comments"
5. Задать значение свойства "Widget id" идентификатором из п.11 регистрации виджета 
6. Сохранить разметку
7. Перезапустить IIS
8. Открыть карточку с этой разметкой
9. Убедиться, что появился новый элемент управления

## Проект HyperCommentsDesignerExtension

Проект-расширение для конструктора разметок. Содержит описание элемента управления "HyperComments" для WebLayoutsDesigner.
Демонстрирует описание и подключение нового контрола, используя класс ControlTypeDescription, 
задание ему стандартных свойств, реализованных в  WebLayoutsDesigner (см. PropertyFactory.GetNameProperty()) и
добавление кастомного свойства, используя класс PropretyDescription (см. свойство WidgetId). 

## Проект HyperCommentsWebExtension

Проект-расширение клиентской части Web-клиент. Содержит пример одного из способов интеграции со сторонними веб приложениями.

---
**ПРИМЕЧАНИЕ**

Платформа HypperComments перестала поддерживать бесплатный тариф. Необходимо приобретение лицензии.

---
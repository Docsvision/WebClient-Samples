# CSPSignatureVisualizationServerExtension

Этот пример серверного расширения демонстрирует вставку собственных изображений штампов электронной подписи в файл, приложенный к карточке Docsvision.

## Настройка среды

**Перечень необходимых инструментов:** 
* [Visual Studio 2022](https://www.visualstudio.com) и выше.

## Сборка

1. Открыть /Samples.sln.
2. Собрать проект CSPSignatureVisualizationServerExtension.
3. Скопировать каталог SamplesOutput\Site\Extensions\CSPSignatureVisualizationServerExtension в каталог "Путь к установленному Web-клиенту/Extensions".
4. Скопировать файл SamplesOutput\Site\Extensions\ru\CSPSignatureVisualizationServerExtension.resources.dll в каталог "Путь к установленному Web-клиенту/ru/"
5. Задать в Справочнике системных настроек адрес Web-клиента (Справочнике системных настроек -> Windows-клиент -> Дополнительные настройки -> Адрес сервера Web-клиента).
6. Задать в конфигурационном файле Web-клиента адрес сервера документов Р7-Офис (Docsvision -> WebClient -> SettingGroups -> WebClient -> ServerR7ConnectionAddress).
7. Перезапустить сервер Web-клиента `sudo systemctl restart dvwebclient`.

## Проверка примера

1. Открыть Web-клиент.
2. Создать карточку документа, приложить к ней .docx-файл, подписать его усиленной электронной подписью.
3. Открыть контекстное меню элемента управления Файлы и выбрать пункт «Показать с ЭП».
4. Загрузится документ в формате PDF, содержащий изображения штампов электроной подписи. Они будут представлять собой изображения штампов, использующихся в Web-клиенте по умолчанию, но с чёрным цветом элементов.
5. Для изменения цвета элементов на ислользуемый в Web-клиенте по умолчанию, нужно заменить в файлах ресурсов значение цвета #000000 на #0029F8.
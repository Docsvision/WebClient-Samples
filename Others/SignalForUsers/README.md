# SignalForUsers

Данный пример демонстрирует возможность отправки оповещения всем активным пользователям Web-клиента.

## Описание примера

Пример включает два компонента:

- SignalServerExtension – папка с серверным расширением Web-клиента, в котором реализована функция отправки сообщений с использованием сервиса IRealtimeCommunicationService API Web-клиента для работы с подсистемой оповещений.
- SignalWebExtension – папка с клиентским расширением, в котором реализован клиентский сервис, взаимодействующий с методами расширения SignalServerExtension, а также обработчик события нажатия кнопки, использующий данный клиентский сервис.

## Настройка среды разработки

**Перечень необходимых инструментов:** 
* [Visual Studio 2017/2019](https://www.visualstudio.com)
* [NodeJS v12.16.1+](https://nodejs.org/en/)

## Сборка проекта

1. Сборка серверной части.
   1. Откройте решение Samples.sln
   2. Соберите проект Other > SignalForUsers > SignalForUsersExtension

2. Сборка клиентской части.
   1. Откройте в командной строке папку Others > SignalForUsers > SignalWebExtension.

   2. Выполните команды:

      ```
      npm install
      npm update
      npm run build:prod
      ```

3. Публикация компонентов на сервере Web-клиент.

   1. Скопируйте папку `SamplesOutput\Site\Content\Modules\SignalForUsersWebExtension\` в  `<Каталог установки Web-клиента>\Site\Content\Modules`.
   2. Скопируйте папку `SamplesOutput\Site\Extensions\SignalForUsersExtension` в  `<Каталог установки Web-клиента>\Site\Extensions`.
   3. Перезапустите IIS.

## Проверка примера

1. В Конструкторе web-разметок добавьте элемент **Кнопка** в любую разметку.

2. Укажите для события «При щелчке» обработчик «sendMessage».

3. Сохраните разметку.

4. Откройте любую карточку с данной настроенной разметкой.

5. Нажмите на добавленную кнопку.

   У всех пользователей, работающих в данный момент в Web-клиента, появится сообщение «В 12:00 планируется перезагрузка Web-клиента. Сохраните данные.».

# CustomStageService

Это демонстрационный вариант специального сервиса логики этапа согласования.

Сервис делает следующее:
1. Подменяет вычисление согласующих.
2. На примере дополнения содержания задания показывает вариант настройки действий после создания задания.

## Настройка среды

Пример рассчитан на версию Web-клиента 18 (6.1) или выше.

**Перечень необходимых инструментов:** 
* [Visual Studio 2022](https://www.visualstudio.com)

## Сборка

1. Открыть /Samples.sln
2. Собрать проект Others > CustomStageService 

## Проверка примера

1.	В файле WebCSamples\Others\CustomStageService\CustomStageService.cs заменить Test\TestEmployee на одну из своих учётных записей, присутствующих в Docsvision.
2.	Пересобрать расширение.
3.	Добавить на сервере библиотеку CustomStageService.dll из папки bin\Debug\net6.0 или bin\Release\net6.0 (в зависимости от выбранной в VisualStudio конфигурации сборки Debug или Release) в две папки:
- в папку common на сервер, где установлен WorkerService (/lib/docsvision/common на Linux)
- в папку, где установлен Windows-клиент, с которого производится настройка (например C:\Program Files (x86)\Docsvision\Client).
4.	Открыть шаблон карточки любого этапа (например, "Согласование с рецензированием" из стандартного согласования модуля "Управление документами"), перейти на вкладку "Специальная логика этапа", в поле "Имя сервиса" выбрать библиотеку.
5.	Настроить и запустить согласование с данным этапом в маршруте. В результате на данном этапе в качестве согласующего будет выбран пользователь, указанный на шаге 1 (например, если используется этап согласования, то этому пользователю придет задание на согласование). Также в созданном задании в описании появится текст "Тест расширения".